<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <script src="d3-sankey-circular.js"></script>
  <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
  <script src="example-data.js"></script>
  <script src="d3-tip.js"></script>
  <script src="drilldownpie.js"></script>
  <script src="draw-units.js"></script>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <script src="Scorecard_subplots.js"></script>



  <!-- <link href="https://fonts.googleapis.com/css?family=Roboto:100i" rel="stylesheet"> -->

  <title>Sankey Model for Cost of Quality</title>
  <style>
    body {
      font-family: monospace;
      /*background: #E3D4C1;*/
      /*background: #000;*/
    }

    rect {
      shape-rendering: crispEdges;
    }

    text {
      /*text-shadow: 0 1px 0 #fff;*/
      font-size: 12px;
      /*font-family: 'Roboto', sans-serif;*/
      font-family: monospace;
      /*fill: white;*/
    }

    .plotlytitles {
      font-size: 16px;
      font-family: monospace;
      color: black
    }

    .link {
      fill: none;
    }

    svg {
      /* position: absolute; */
    }

    canvas {
      position: absolute;
      pointer-events: none;
    }

    /* pie chart css */
    .outer-label {
      color: rgba(0, 0, 0, 0.8);
      font-size: 12px;
      font-family: monospace;
      text-align: center;
    }

    .center {
      font-size: 18px;
      text-transform: uppercase;
      /* fill: #fff; */
    }

    path {
      cursor: pointer;
    }

    #graph-container,
    #barcharts_div {
      display: inline;
    }

    #plotly_COQ,
    #plotly_ind {
      display: inline;
    }

    .d3-tip {
      line-height: 1;
      padding: 6px;
      background: cornsilk;
      color: rgba(0, 0, 0, 0.8);
      border-radius: 4px;
      font-size: 12px;
      font-family: monospace;
    }

.objecttable td {
       padding: 8px;
      }
    /* @-webkit-keyframes scale-up {
    from { @include transform(scale(0.95)); opacity: 0; }
    to { @include transform(scale(1)); opacity: 1; }
} */
  </style>
</head>

<body>

  <h1>Sankey Model of Cost of Quality</h1>
  <center>
  <table border="1">
    <tr>
    <th>Header 1</th>
    <th>Header 2</th>
    </tr>
    <tr>
    <td>row 1, cell 1</td>
    <td>row 1, cell 2</td>
    </tr>
    <tr>
    <td>row 2, cell 1</td>
    <td>row 2, cell 2</td>
    </tr>
    </table>
     
      <button id="killData" onclick="killData()" value="test">Save & Run</button>
  

</center>
  <div id="block container">
    <div id="sankey"> <canvas width="1000" height="530"></canvas>
      <svg width="1000" height="100"></svg>
    </div>

    <svg id="Bullet_titles" width="1000" height="20"></svg>
    <!-- <div class="row">
        <div class="col-md-5">
          <div id="defectBullet_title" class="plotlytitles">
            <center><u>Defective Unit Counter</u></center>
          </div>
        </div>
        <div class="col-md-5">
          <div id="coqBullet_title" class="plotlytitles">
            <center><u>Cost of Quality (COQ) as % of Net Sales</u></center>
          </div>
        </div>
      </div>-->
    <div id=plotly_COQ> </div>


    <!-- <div class="col"> -->
    <div id="barcharts_div">
      <svg id="barcharts" width="530" height="500"></svg>
      <svg id="graph-container" width="400" height="500"></svg>
    </div>

    <!-- <div class = "col"> -->
    <!-- <div id="graph-container"></div> -->
  </div>

  <script>

    height = d3.select("#sankey").attr("height")

    // Creates color based on COQ components
    const colorLookup = {
      "COGQ": "DarkSeaGreen",
      "COPQ": "LightCoral",
      "Prevention": "blue",
      "Appraisal": "purple",
      "Internal Failure": "orange",
      "External Failure": "red",
      "Shipping": "gray",
      "End User": "green"
    }

    let data = data2
    function updateData() {
      // killData()
      // console.log(d3.select("#killData").node().value)
      // d3.selectAll("svg > *").remove();
      drawUnits(data)
      d3.select("#killData").node().value="allowtime"
    }

    function killData() {
      d3.selectAll("svg > *").remove();
      d3.select("#killData").node().value="stoptime"
      console.log(d3.select("#killData").node().value)
      // d3.select("#killData").node().value="allowtime"
      setTimeout(function(){ updateData(); }, 500)
    }

    
    console.log(d3.select("#killData").node().value);
  </script>
  <!-- <script src="d3.sankey.js"></script> -->
  
  
  <!-- <script src="Scorecard.js"></script> -->
  
</body>

</html>